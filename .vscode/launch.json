{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Debug",
      "type": "cppdbg",
      "request": "launch",
      "program": "${workspaceFolder}/build/Debug/${config:projectName}.elf",
      "cwd": "${workspaceFolder}",
      "MIMode": "gdb",
      "miDebuggerPath": "T:/xpack-riscv-none-elf-gcc-14.2.0-3/bin/riscv-none-elf-gdb.exe",
      // "miDebuggerServerAddress": "localhost:3333",
      "preLaunchTask": "StartGDB",
      "setupCommands": [
        { "text": "target extended-remote :3333" },
        { "text": "monitor reset halt" }, // остановить CPU после reset
        {
          "text": "file T:/VSC/mik/mik_build/build/Debug/${config:projectName}.elf"
        },
        // { "text": "load" }, // загрузить ELF в память
        { "text": "set mem inaccessible-by-default on" },
        { "text": "mem 0x00040000 0x00090000 rw" },
        { "text": "mem 0x02000000 0x02004000 rw" }, // SRAM
        { "text": "mem 0x01000000 0x01002000 ro" }, // EEPROM
        { "text": "mem 0x80000000 0x81000000 ro" }, // SPIFI Flash
        { "text": "set arch riscv:rv32" },
        { "text": "set remotetimeout 30" },
        { "text": "set remote hardware-breakpoint-limit 2" }
        // { "text": "break main" } // ставим брейкпоинт на main
        // { "text": "continue" }
      ],
      "logging": {
        "engineLogging": true,
        "trace": true,
        "traceResponse": true
      }
      // "postDebugTask": "Close GDB connection"
    }
  ]
}
